import"https://unpkg.com/@workadventure/scripting-api-extra@^1";/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var M=Object.prototype.toString,P=Array.isArray||function(e){return M.call(e)==="[object Array]"};function z(r){return typeof r=="function"}function q(r){return P(r)?"array":typeof r}function R(r){return r.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function N(r,e){return r!=null&&typeof r=="object"&&e in r}function Z(r,e){return r!=null&&typeof r!="object"&&r.hasOwnProperty&&r.hasOwnProperty(e)}var B=RegExp.prototype.test;function x(r,e){return B.call(r,e)}var G=/\S/;function J(r){return!x(G,r)}var $={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function V(r){return String(r).replace(/[&<>"'`=\/]/g,function(n){return $[n]})}var Q=/\s*/,X=/\s+/,H=/\s*=/,Y=/\s*\}/,ee=/#|\^|\/|>|\{|&|=|!/;function re(r,e){if(!r)return[];var n=!1,t=[],a=[],s=[],i=!1,o=!1,u="",l=0;function f(){if(i&&!o)for(;s.length;)delete a[s.pop()];else s=[];i=!1,o=!1}var g,w,O;function L(y){if(typeof y=="string"&&(y=y.split(X,2)),!P(y)||y.length!==2)throw new Error("Invalid tags: "+y);g=new RegExp(R(y[0])+"\\s*"),w=new RegExp("\\s*"+R(y[1])),O=new RegExp("\\s*"+R("}"+y[1]))}L(e||v.tags);for(var p=new A(r),b,h,d,S,U,k;!p.eos();){if(b=p.pos,d=p.scanUntil(g),d)for(var I=0,F=d.length;I<F;++I)S=d.charAt(I),J(S)?(s.push(a.length),u+=S):(o=!0,n=!0,u+=" "),a.push(["text",S,b,b+1]),b+=1,S===`
`&&(f(),u="",l=0,n=!1);if(!p.scan(g))break;if(i=!0,h=p.scan(ee)||"name",p.scan(Q),h==="="?(d=p.scanUntil(H),p.scan(H),p.scanUntil(w)):h==="{"?(d=p.scanUntil(O),p.scan(Y),p.scanUntil(w),h="&"):d=p.scanUntil(w),!p.scan(w))throw new Error("Unclosed tag at "+p.pos);if(h==">"?U=[h,d,b,p.pos,u,l,n]:U=[h,d,b,p.pos],l++,a.push(U),h==="#"||h==="^")t.push(U);else if(h==="/"){if(k=t.pop(),!k)throw new Error('Unopened section "'+d+'" at '+b);if(k[1]!==d)throw new Error('Unclosed section "'+k[1]+'" at '+b)}else h==="name"||h==="{"||h==="&"?o=!0:h==="="&&L(d)}if(f(),k=t.pop(),k)throw new Error('Unclosed section "'+k[1]+'" at '+p.pos);return te(ne(a))}function ne(r){for(var e=[],n,t,a=0,s=r.length;a<s;++a)n=r[a],n&&(n[0]==="text"&&t&&t[0]==="text"?(t[1]+=n[1],t[3]=n[3]):(e.push(n),t=n));return e}function te(r){for(var e=[],n=e,t=[],a,s,i=0,o=r.length;i<o;++i)switch(a=r[i],a[0]){case"#":case"^":n.push(a),t.push(a),n=a[4]=[];break;case"/":s=t.pop(),s[5]=a[2],n=t.length>0?t[t.length-1][4]:e;break;default:n.push(a)}return e}function A(r){this.string=r,this.tail=r,this.pos=0}A.prototype.eos=function(){return this.tail===""};A.prototype.scan=function(e){var n=this.tail.match(e);if(!n||n.index!==0)return"";var t=n[0];return this.tail=this.tail.substring(t.length),this.pos+=t.length,t};A.prototype.scanUntil=function(e){var n=this.tail.search(e),t;switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t};function E(r,e){this.view=r,this.cache={".":this.view},this.parent=e}E.prototype.push=function(e){return new E(e,this)};E.prototype.lookup=function(e){var n=this.cache,t;if(n.hasOwnProperty(e))t=n[e];else{for(var a=this,s,i,o,u=!1;a;){if(e.indexOf(".")>0)for(s=a.view,i=e.split("."),o=0;s!=null&&o<i.length;)o===i.length-1&&(u=N(s,i[o])||Z(s,i[o])),s=s[i[o++]];else s=a.view[e],u=N(a.view,e);if(u){t=s;break}a=a.parent}n[e]=t}return z(t)&&(t=t.call(this.view)),t};function c(){this.templateCache={_cache:{},set:function(e,n){this._cache[e]=n},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}c.prototype.clearCache=function(){typeof this.templateCache!="undefined"&&this.templateCache.clear()};c.prototype.parse=function(e,n){var t=this.templateCache,a=e+":"+(n||v.tags).join(":"),s=typeof t!="undefined",i=s?t.get(a):void 0;return i==null&&(i=re(e,n),s&&t.set(a,i)),i};c.prototype.render=function(e,n,t,a){var s=this.getConfigTags(a),i=this.parse(e,s),o=n instanceof E?n:new E(n,void 0);return this.renderTokens(i,o,t,e,a)};c.prototype.renderTokens=function(e,n,t,a,s){for(var i="",o,u,l,f=0,g=e.length;f<g;++f)l=void 0,o=e[f],u=o[0],u==="#"?l=this.renderSection(o,n,t,a,s):u==="^"?l=this.renderInverted(o,n,t,a,s):u===">"?l=this.renderPartial(o,n,t,s):u==="&"?l=this.unescapedValue(o,n):u==="name"?l=this.escapedValue(o,n,s):u==="text"&&(l=this.rawValue(o)),l!==void 0&&(i+=l);return i};c.prototype.renderSection=function(e,n,t,a,s){var i=this,o="",u=n.lookup(e[1]);function l(w){return i.render(w,n,t,s)}if(!!u){if(P(u))for(var f=0,g=u.length;f<g;++f)o+=this.renderTokens(e[4],n.push(u[f]),t,a,s);else if(typeof u=="object"||typeof u=="string"||typeof u=="number")o+=this.renderTokens(e[4],n.push(u),t,a,s);else if(z(u)){if(typeof a!="string")throw new Error("Cannot use higher-order sections without the original template");u=u.call(n.view,a.slice(e[3],e[5]),l),u!=null&&(o+=u)}else o+=this.renderTokens(e[4],n,t,a,s);return o}};c.prototype.renderInverted=function(e,n,t,a,s){var i=n.lookup(e[1]);if(!i||P(i)&&i.length===0)return this.renderTokens(e[4],n,t,a,s)};c.prototype.indentPartial=function(e,n,t){for(var a=n.replace(/[^ \t]/g,""),s=e.split(`
`),i=0;i<s.length;i++)s[i].length&&(i>0||!t)&&(s[i]=a+s[i]);return s.join(`
`)};c.prototype.renderPartial=function(e,n,t,a){if(!!t){var s=this.getConfigTags(a),i=z(t)?t(e[1]):t[e[1]];if(i!=null){var o=e[6],u=e[5],l=e[4],f=i;u==0&&l&&(f=this.indentPartial(i,l,o));var g=this.parse(f,s);return this.renderTokens(g,n,t,f,a)}}};c.prototype.unescapedValue=function(e,n){var t=n.lookup(e[1]);if(t!=null)return t};c.prototype.escapedValue=function(e,n,t){var a=this.getConfigEscape(t)||v.escape,s=n.lookup(e[1]);if(s!=null)return typeof s=="number"&&a===v.escape?String(s):a(s)};c.prototype.rawValue=function(e){return e[1]};c.prototype.getConfigTags=function(e){return P(e)?e:e&&typeof e=="object"?e.tags:void 0};c.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!P(e))return e.escape};var v={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(r){T.templateCache=r},get templateCache(){return T.templateCache}},T=new c;v.clearCache=function(){return T.clearCache()};v.parse=function(e,n){return T.parse(e,n)};v.render=function(e,n,t,a){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+q(e)+'" was given as the first argument for mustache#render(template, view, partials)');return T.render(e,n,t,a)};v.escape=V;v.Scanner=A;v.Context=E;v.Writer=c;var m=void 0,W=!1,ae="https://de.wikipedia.org/wiki/Hofzug",se="https://de.wikipedia.org/wiki/Nikolaus_II._(Russland)";function C(){m!==void 0&&(m.close(),m=void 0)}var j="bild1",_="fireplaceInfo",D="train",ie="popUpTrain",oe="popUpEmperorWilhelm",ue="popUpFireplace",K="OK",le="Mehr zum Hofzug",pe="Mehr zu Zar Nikolaus II.",ce=`Zwei historische Reisezugwagen aus der Zeit der K\xF6niglich Preu\xDFischen Eisenbahnverwaltung findest du im Kaiserbahnhof in Potsdam. Heute sind dies vier moderne Konferenzr\xE4ume:

1. Hofsalonwagen der Kaiserin Auguste Viktoria (1851-1921), der Gattin Kaiser Wilhelm II. von 1901
2. Preu\xDFischer Schnellzugwagen von 1912. Er wurde als 2. Klasse-Wagen im Personenverkehr eingesetzt`,fe="Wilhelm II. von Preu\xDFen (* 27. Januar 1859 in Berlin; \u2020 4. Juni 1941 in Doorn, Niederlande), aus dem Haus Hohenzollern war von 1888 bis 1918 letzter Deutscher Kaiser und K\xF6nig von Preu\xDFen.",he="Wusstest du, das dieser Kamin im Kaisersaal des Kaiserbahnhofs in Potsdam zu finden ist. Wenn du das n\xE4chste Mal dort bist, wirf doch einmal einen Blick darauf. Der Kamin ist ein Nachbau. Der urspr\xFCngliche Kamin war ein Gastgeschenk des Zar Nikolaus II., der 1910 mit einem Hofzug an der Station empfangen wurde.";WA.room.onEnterLayer(D).subscribe(()=>{m=WA.ui.openPopup(ie,ce,[{label:K,callback:r=>{C()}}])});WA.room.onLeaveLayer(D).subscribe(()=>{C(),W&&(WA.nav.closeCoWebSites(),W=!1)});WA.room.onEnterLayer(_).subscribe(()=>{m=WA.ui.openPopup(ue,he,[{label:K,callback:r=>{C()}},{label:le,callback:r=>{WA.nav.openTab(ae),W=!0}},{label:pe,callback:r=>{WA.nav.openTab(se),W=!0}}])});WA.room.onLeaveLayer(_).subscribe(()=>{C(),W&&(WA.nav.closeCoWebSites(),W=!1)});WA.room.onEnterLayer(j).subscribe(()=>{m=WA.ui.openPopup(oe,fe,[{label:K,callback:r=>{C()}}])});WA.room.onLeaveLayer(j).subscribe(()=>{C()});
